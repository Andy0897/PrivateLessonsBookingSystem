<!DOCTYPE html>
<html lang="bg" xmlns:th="http://www.w3.org/1999/xhtml">
<head th:replace="~{fragments/head}"></head>
<body class="lesson-bg">
<nav th:replace="~{fragments/navbar}"></nav>
<main>
    <div class="container py-5">
        <h1 class="text-center mb-5 fw-bold text-light">Нашите преподаватели</h1>

        <form method="get" th:action="@{/teacher-profiles}" class="row g-2 align-items-end mb-4">
            <div class="col-md-6">
                <label class="form-label text-light fw-semibold">Филтър по предмет</label>
                <select name="subjectId" class="form-select"
                        onchange="this.form.submit()">
                    <option th:value="${null}" th:selected="${selectedSubjectId == null}">
                        Всички предмети
                    </option>

                    <option th:each="subject : ${subjects}"
                            th:value="${subject.id}"
                            th:text="${subject.name}"
                            th:selected="${selectedSubjectId != null and selectedSubjectId == subject.id}">
                    </option>
                </select>
            </div>

            <div class="col-md-3">
                <button type="submit" class="btn btn-primary w-100 fw-semibold">
                    Търси
                </button>
            </div>

            <div class="col-md-3">
                <a class="btn btn-outline-light w-100 fw-semibold" th:href="@{/teacher-profiles}">
                    Изчисти
                </a>
            </div>
        </form>

        <div class="row g-4">
            <div class="col-lg-4 col-md-6"
                 th:each="teacherProfile : ${teacherProfiles}">
                <div class="white-card text-dark text-center">
                    <img th:if="${teacherProfile.profilePicture != null}"
                         th:src="'data:image/jpeg;base64,' + ${encoder.encodeToBase64(teacherProfile.profilePicture)}"
                         class="teacher-avatar rounded-circle border border-3 shadow mb-3"/>
                    <img th:if="${teacherProfile.profilePicture == null}"
                         src="/images/default-profile.png"
                         class="teacher-avatar rounded-circle border border-3 shadow mb-3"/>
                    <h4 class="fw-bold"
                        th:text="|${teacherProfile.user.firstName} ${teacherProfile.user.lastName}|"></h4>
                    <div class="mb-2">
                        <span class="badge bg-success fs-6 px-3 py-2">
                            <span th:text="|${teacherProfile.pricePerHour} лв/час|"></span>
                        </span>
                    </div>
                    <p class="opacity-75 small mt-3"
                       th:text="${teacherProfile.introduction}"></p>
                    <div class="mt-3">
                        <h6 class="fw-semibold">Преподава:</h6>
                        <span class="badge me-1 mb-1"
                              th:each="subject : ${teacherProfile.subjects}"
                              th:text="${subject.name}">
                        </span>
                    </div>
                    <div class="mt-3">
                        <h6 class="fw-semibold">Работно време:</h6>
                        <p class="small mb-0"
                           th:text="|От ${#temporals.format(teacherProfile.workStart, 'HH:mm')} до ${#temporals.format(teacherProfile.workEnd, 'HH:mm')}|">
                        </p>
                    </div>
                    <button class="btn btn-primary w-100 mt-4 fw-semibold neon-button"
                            th:onclick="|window.location.href='/teacher-profiles/${teacherProfile.id}';|">
                        Виж повече
                    </button>
                </div>
            </div>
        </div>
    </div>
</main>
<footer th:replace="~{fragments/footer}"></footer>
</body>
</html>
